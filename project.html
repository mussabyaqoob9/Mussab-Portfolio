<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Portfolio — Project</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(180deg, #f8fafc, #eef2ff);
      color: #0f1724;
      min-height: 100vh;
    }
    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
    }
    .card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    h1 {
      margin-top: 0;
      color: #0f1724;
    }
    .btn {
      padding: 10px 18px;
      border-radius: 8px;
      border: none;
      background: #0f1724;
      color: white;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;
    }
    .btn:hover {
      background: #1e293b;
      transform: translateY(-2px);
    }
    .btn.ghost {
      background: transparent;
      border: 1px solid #ccc;
      color: #0f1724;
    }
    .btn.ghost:hover {
      background: #f1f5f9;
    }
    .project-canvas {
      height: 400px;
      border-radius: 10px;
      overflow: hidden;
      margin: 20px 0;
      position: relative;
      opacity: 0;
      transition: opacity 1s ease;
    }
    .project-canvas.visible {
      opacity: 1;
    }
    .project-info {
      margin-top: 24px;
      padding-top: 16px;
      border-top: 1px solid #eee;
    }
    .controls {
      display: flex;
      gap: 10px;
      margin: 15px 0;
    }
    .loading {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.8);
      z-index: 10;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #6366f1;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <main class="container">
    <div class="card">
      <h1>Interactive Portfolio — Project</h1>
      <p>This WebGL visualization demonstrates particle physics in a 3D space.</p>

      <div class="controls">
        <button id="playPauseBtn" class="btn">Pause</button>
        <button id="changeColorBtn" class="btn ghost">Change Color</button>
      </div>

      <div class="project-canvas" id="canvasContainer">
        <div class="loading" id="loadingIndicator">
          <div class="spinner"></div>
        </div>
      </div>

      <div class="project-info">
        <h3>About This Project</h3>
        <p>This interactive visualization uses Three.js to create a dynamic particle system that responds to mouse movement.</p>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/three@0.132.2/build/three.min.js"></script>
  <script>
    const canvasContainer = document.getElementById('canvasContainer');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const playPauseBtn = document.getElementById('playPauseBtn');
    const changeColorBtn = document.getElementById('changeColorBtn');

    let scene, camera, renderer, particleSystem;
    let isPlaying = true, mouseX = 0, mouseY = 0;

    function initThreeJS() {
      loadingIndicator.classList.remove('hidden');

      setTimeout(() => {
        const width = canvasContainer.offsetWidth;
        const height = canvasContainer.offsetHeight;

        scene = new THREE.Scene();
        camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
        camera.position.z = 5;

        renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(width, height);
        renderer.setClearColor(0x000000, 0);
        canvasContainer.appendChild(renderer.domElement);

        const particleCount = 2000;
        const positions = new Float32Array(particleCount * 3);
        const colors = new Float32Array(particleCount * 3);

        for (let i = 0; i < particleCount; i++) {
          const i3 = i * 3;
          const radius = 4;
          const theta = Math.random() * Math.PI * 2;
          const phi = Math.random() * Math.PI;
          positions[i3] = radius * Math.sin(phi) * Math.cos(theta);
          positions[i3 + 1] = radius * Math.sin(phi) * Math.sin(theta);
          positions[i3 + 2] = radius * Math.cos(phi);
          colors[i3] = Math.random();
          colors[i3 + 1] = Math.random();
          colors[i3 + 2] = Math.random();
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
        geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

        const material = new THREE.ShaderMaterial({
          vertexShader: `
            varying vec3 vColor;
            void main() {
              vColor = color;
              vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
              gl_PointSize = 5.0;
              gl_Position = projectionMatrix * mvPosition;
            }
          `,
          fragmentShader: `
            varying vec3 vColor;
            void main() {
              vec2 cxy = 2.0 * gl_PointCoord - 1.0;
              if (dot(cxy, cxy) > 1.0) discard;
              gl_FragColor = vec4(vColor, 1.0);
            }
          `,
          vertexColors: true,
          blending: THREE.AdditiveBlending,
          depthTest: false,
          transparent: true
        });

        particleSystem = new THREE.Points(geometry, material);
        scene.add(particleSystem);

        window.addEventListener('resize', onWindowResize);
        document.addEventListener('mousemove', onMouseMove);

        loadingIndicator.classList.add('hidden');
        canvasContainer.classList.add('visible');

        animate();
      }, 100);
    }

    function onWindowResize() {
      camera.aspect = canvasContainer.offsetWidth / canvasContainer.offsetHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(canvasContainer.offsetWidth, canvasContainer.offsetHeight);
    }

    function onMouseMove(event) {
      mouseX = (event.clientX / window.innerWidth) * 2 - 1;
      mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
    }

    function animate() {
      requestAnimationFrame(animate);
      if (!isPlaying || !particleSystem) return;

      const time = Date.now() * 0.001;
      const positions = particleSystem.geometry.attributes.position.array;

      for (let i = 0; i < positions.length; i += 3) {
        positions[i] += Math.sin(time + positions[i]) * 0.005;
        positions[i + 1] += Math.cos(time + positions[i + 1]) * 0.005;
        positions[i + 2] += Math.sin(time + positions[i + 2]) * 0.005;

        const dx = positions[i] - (mouseX * 5);
        const dy = positions[i + 1] - (mouseY * 5);
        const distance = Math.sqrt(dx * dx + dy * dy);
        if (distance < 2) {
          positions[i] += dx * 0.05;
          positions[i + 1] += dy * 0.05;
        }
      }

      particleSystem.geometry.attributes.position.needsUpdate = true;
      particleSystem.rotation.x += 0.001;
      particleSystem.rotation.y += 0.002;
      renderer.render(scene, camera);
    }

    function togglePlayPause() {
      isPlaying = !isPlaying;
      playPauseBtn.textContent = isPlaying ? 'Pause' : 'Play';
    }

    function changeColors() {
      if (!particleSystem) return;
      const colors = particleSystem.geometry.attributes.color.array;
      for (let i = 0; i < colors.length; i += 3) {
        colors[i] = Math.random();
        colors[i + 1] = Math.random();
        colors[i + 2] = Math.random();
      }
      particleSystem.geometry.attributes.color.needsUpdate = true;
    }

    playPauseBtn.addEventListener('click', togglePlayPause);
    changeColorBtn.addEventListener('click', changeColors);

    // Initialize Three.js immediately
    initThreeJS();
  </script>
</body>
</html>
