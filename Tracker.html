<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health & Wellness Tracker</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --success: #4cc9f0;
            --danger: #f72585;
            --warning: #f8961e;
            --info: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --background: #f0f7ff;
            --card-bg: #ffffff;
            --text: #333333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 3fr;
            gap: 25px;
        }

        .sidebar {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background-color: var(--primary);
            color: white;
        }

        .nav-item i {
            font-size: 1.2rem;
        }

        .main-content {
            display: grid;
            grid-template-rows: auto 1fr;
            gap: 25px;
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .stat-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary);
        }

        .stat-card h3 {
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #777;
        }

        .charts-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 25px;
        }

        .chart-card {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }

        .chart-card h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .recommendations {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 25px;
        }

        .recommendations h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .recommendation-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 10px;
            background-color: #f8f9fa;
            transition: transform 0.3s ease;
        }

        .recommendation-item:hover {
            transform: translateX(5px);
        }

        .recommendation-item i {
            font-size: 1.5rem;
            color: var(--info);
            margin-top: 5px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background-color: var(--card-bg);
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close {
            font-size: 1.5rem;
            cursor: pointer;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .add-data-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 100;
            transition: transform 0.3s ease;
        }

        .add-data-btn:hover {
            transform: scale(1.1);
        }

        .data-history {
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 25px;
            display: none;
        }

        .data-history h2 {
            margin-bottom: 20px;
            color: var(--primary);
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
        }

        .history-table th, .history-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .history-table th {
            background-color: #f8f9fa;
            font-weight: 600;
        }

        .history-table tr:hover {
            background-color: #f8f9fa;
        }

        .delete-btn {
            color: var(--danger);
            cursor: pointer;
        }

        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        @media (max-width: 992px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .stats-cards {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .charts-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 576px) {
            .stats-cards {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-heartbeat"></i>
                <h1>Health & Wellness Tracker</h1>
            </div>
            <div class="user-info">
                <div class="user-img">JD</div>
                <div>
                    <h3>John Doe</h3>
                    <p>Age: 32 | Height: 175cm</p>
                </div>
            </div>
        </header>

        <div class="dashboard">
            <div class="sidebar">
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-home"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-page="weight">
                    <i class="fas fa-weight"></i>
                    <span>Weight Tracking</span>
                </div>
                <div class="nav-item" data-page="heart">
                    <i class="fas fa-heart"></i>
                    <span>Heart Rate</span>
                </div>
                <div class="nav-item" data-page="nutrition">
                    <i class="fas fa-utensils"></i>
                    <span>Nutrition</span>
                </div>
                <div class="nav-item" data-page="activity">
                    <i class="fas fa-running"></i>
                    <span>Activity</span>
                </div>
                <div class="nav-item" data-page="sleep">
                    <i class="fas fa-moon"></i>
                    <span>Sleep</span>
                </div>
                <div class="nav-item" data-page="settings">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>

            <div class="main-content">
                <!-- Dashboard Page -->
                <div id="dashboard-page" class="page active">
                    <div class="stats-cards">
                        <div class="stat-card">
                            <i class="fas fa-weight"></i>
                            <h3 id="current-weight">72.5 kg</h3>
                            <p>Current Weight</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-heart"></i>
                            <h3 id="current-heartrate">68 bpm</h3>
                            <p>Resting Heart Rate</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-wine-glass"></i>
                            <h3 id="current-water">1.8L</h3>
                            <p>Water Intake</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-fire"></i>
                            <h3 id="current-calories">2,340</h3>
                            <p>Calories Burned</p>
                        </div>
                    </div>

                    <div class="charts-container">
                        <div class="chart-card">
                            <h2>Weekly Health Metrics</h2>
                            <canvas id="healthChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h2>Sleep Quality</h2>
                            <canvas id="sleepChart"></canvas>
                        </div>
                    </div>

                    <div class="recommendations">
                        <h2>AI-Powered Recommendations</h2>
                        <div class="recommendation-item">
                            <i class="fas fa-lightbulb"></i>
                            <div>
                                <h3>Increase Water Intake</h3>
                                <p>Based on your activity level, try to drink at least 2.5L of water daily to stay properly hydrated.</p>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <i class="fas fa-lightbulb"></i>
                            <div>
                                <h3>Sleep Consistency</h3>
                                <p>Your sleep schedule varies by more than 2 hours. Try going to bed and waking up at the same time each day.</p>
                            </div>
                        </div>
                        <div class="recommendation-item">
                            <i class="fas fa-lightbulb"></i>
                            <div>
                                <h3>Cardio Exercise</h3>
                                <p>Consider adding 20 minutes of moderate cardio 3 times per week to improve your cardiovascular health.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Weight Tracking Page -->
                <div id="weight-page" class="page">
                    <div class="chart-card">
                        <h2>Weight Progress</h2>
                        <canvas id="weightChart"></canvas>
                    </div>
                    <div class="data-history">
                        <h2>Weight History</h2>
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Weight (kg)</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="weight-history-body">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Heart Rate Page -->
                <div id="heart-page" class="page">
                    <div class="chart-card">
                        <h2>Heart Rate Trends</h2>
                        <canvas id="heartRateChart"></canvas>
                    </div>
                    <div class="data-history">
                        <h2>Heart Rate History</h2>
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Heart Rate (bpm)</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="heart-history-body">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Other pages would be added here with similar structure -->
                <div id="nutrition-page" class="page">
                    <div class="chart-card">
                        <h2>Nutrition Overview</h2>
                        <canvas id="nutritionChart"></canvas>
                    </div>
                    <div class="data-history">
                        <h2>Nutrition History</h2>
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Calories</th>
                                    <th>Protein (g)</th>
                                    <th>Carbs (g)</th>
                                    <th>Fat (g)</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="nutrition-history-body">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="activity-page" class="page">
                    <div class="chart-card">
                        <h2>Activity Summary</h2>
                        <canvas id="activityChart"></canvas>
                    </div>
                    <div class="data-history">
                        <h2>Activity History</h2>
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Activity Type</th>
                                    <th>Duration</th>
                                    <th>Calories Burned</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="activity-history-body">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="sleep-page" class="page">
                    <div class="chart-card">
                        <h2>Sleep Patterns</h2>
                        <canvas id="sleepDetailChart"></canvas>
                    </div>
                    <div class="data-history">
                        <h2>Sleep History</h2>
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Hours Slept</th>
                                    <th>Quality (1-10)</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="sleep-history-body">
                                <!-- Will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="settings-page" class="page">
                    <div class="chart-card">
                        <h2>User Settings</h2>
                        <form id="user-settings-form">
                            <div class="form-group">
                                <label for="user-name">Name</label>
                                <input type="text" id="user-name" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label for="user-age">Age</label>
                                <input type="number" id="user-age" value="32">
                            </div>
                            <div class="form-group">
                                <label for="user-height">Height (cm)</label>
                                <input type="number" id="user-height" value="175">
                            </div>
                            <div class="form-group">
                                <label for="user-weight">Weight Goal (kg)</label>
                                <input type="number" id="user-weight" value="70">
                            </div>
                            <button type="submit" class="btn btn-primary">Save Settings</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="add-data-btn" id="addDataBtn">
        <i class="fas fa-plus"></i>
    </div>

    <div class="modal" id="dataModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Add Health Data</h2>
                <span class="close">&times;</span>
            </div>
            <form id="healthDataForm">
                <div class="form-group">
                    <label for="metricType">Metric Type</label>
                    <select id="metricType">
                        <option value="weight">Weight</option>
                        <option value="heartRate">Heart Rate</option>
                        <option value="water">Water Intake</option>
                        <option value="sleep">Sleep</option>
                        <option value="activity">Activity</option>
                        <option value="nutrition">Nutrition</option>
                    </select>
                </div>
                <div id="weight-fields" class="metric-fields">
                    <div class="form-group">
                        <label for="weightValue">Weight (kg)</label>
                        <input type="number" id="weightValue" placeholder="Enter weight in kg" step="0.1">
                    </div>
                </div>
                <div id="heartRate-fields" class="metric-fields" style="display: none;">
                    <div class="form-group">
                        <label for="heartRateValue">Heart Rate (bpm)</label>
                        <input type="number" id="heartRateValue" placeholder="Enter heart rate">
                    </div>
                </div>
                <div id="water-fields" class="metric-fields" style="display: none;">
                    <div class="form-group">
                        <label for="waterValue">Water Intake (L)</label>
                        <input type="number" id="waterValue" placeholder="Enter water in liters" step="0.1">
                    </div>
                </div>
                <div id="sleep-fields" class="metric-fields" style="display: none;">
                    <div class="form-group">
                        <label for="sleepHours">Hours Slept</label>
                        <input type="number" id="sleepHours" placeholder="Enter hours" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="sleepQuality">Sleep Quality (1-10)</label>
                        <input type="number" id="sleepQuality" placeholder="Rate your sleep" min="1" max="10">
                    </div>
                </div>
                <div id="activity-fields" class="metric-fields" style="display: none;">
                    <div class="form-group">
                        <label for="activityType">Activity Type</label>
                        <select id="activityType">
                            <option value="walking">Walking</option>
                            <option value="running">Running</option>
                            <option value="cycling">Cycling</option>
                            <option value="swimming">Swimming</option>
                            <option value="gym">Gym Workout</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="activityDuration">Duration (minutes)</label>
                        <input type="number" id="activityDuration" placeholder="Enter duration">
                    </div>
                    <div class="form-group">
                        <label for="activityCalories">Calories Burned</label>
                        <input type="number" id="activityCalories" placeholder="Enter calories">
                    </div>
                </div>
                <div id="nutrition-fields" class="metric-fields" style="display: none;">
                    <div class="form-group">
                        <label for="caloriesConsumed">Calories Consumed</label>
                        <input type="number" id="caloriesConsumed" placeholder="Enter calories">
                    </div>
                    <div class="form-group">
                        <label for="protein">Protein (g)</label>
                        <input type="number" id="protein" placeholder="Enter protein in grams">
                    </div>
                    <div class="form-group">
                        <label for="carbs">Carbs (g)</label>
                        <input type="number" id="carbs" placeholder="Enter carbs in grams">
                    </div>
                    <div class="form-group">
                        <label for="fat">Fat (g)</label>
                        <input type="number" id="fat" placeholder="Enter fat in grams">
                    </div>
                </div>
                <div class="form-group">
                    <label for="metricDate">Date</label>
                    <input type="date" id="metricDate">
                </div>
                <div class="form-group">
                    <label for="metricNotes">Notes (optional)</label>
                    <textarea id="metricNotes" placeholder="Add any notes here"></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Save Data</button>
            </form>
        </div>
    </div>

    <script>
        // Data storage
        let healthData = {
            weight: [
                { date: '2023-06-01', value: 73.2 },
                { date: '2023-06-02', value: 73.0 },
                { date: '2023-06-03', value: 72.8 },
                { date: '2023-06-04', value: 72.7 },
                { date: '2023-06-05', value: 72.5 },
                { date: '2023-06-06', value: 72.5 },
                { date: '2023-06-07', value: 72.5 }
            ],
            heartRate: [
                { date: '2023-06-01', value: 70 },
                { date: '2023-06-02', value: 69 },
                { date: '2023-06-03', value: 68 },
                { date: '2023-06-04', value: 68 },
                { date: '2023-06-05', value: 68 },
                { date: '2023-06-06', value: 67 },
                { date: '2023-06-07', value: 68 }
            ],
            water: [
                { date: '2023-06-07', value: 1.8 }
            ],
            sleep: [
                { date: '2023-06-01', hours: 7.5, quality: 8 },
                { date: '2023-06-02', hours: 6.8, quality: 6 },
                { date: '2023-06-03', hours: 7.2, quality: 7 },
                { date: '2023-06-04', hours: 6.5, quality: 5 },
                { date: '2023-06-05', hours: 7.0, quality: 7 },
                { date: '2023-06-06', hours: 8.5, quality: 9 },
                { date: '2023-06-07', hours: 8.2, quality: 8 }
            ],
            activity: [
                { date: '2023-06-07', type: 'running', duration: 30, calories: 320 }
            ],
            nutrition: [
                { date: '2023-06-07', calories: 2100, protein: 95, carbs: 250, fat: 70 }
            ]
        };

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize charts
            initCharts();
            
            // Set up navigation
            setupNavigation();
            
            // Set up modal functionality
            setupModal();
            
            // Set up form submission
            setupForm();
            
            // Load initial data
            updateUI();
            
            // Set today's date as default
            const today = new Date().toISOString().substr(0, 10);
            document.getElementById('metricDate').value = today;
        });

        // Initialize charts
        function initCharts() {
            // Health metrics chart
            const healthCtx = document.getElementById('healthChart').getContext('2d');
            const healthChart = new Chart(healthCtx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [
                        {
                            label: 'Weight (kg)',
                            data: healthData.weight.map(item => item.value),
                            borderColor: '#4361ee',
                            tension: 0.1,
                            yAxisID: 'y'
                        },
                        {
                            label: 'Heart Rate (bpm)',
                            data: healthData.heartRate.map(item => item.value),
                            borderColor: '#f72585',
                            tension: 0.1,
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Weight (kg)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Heart Rate (bpm)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
            
            // Sleep quality chart
            const sleepCtx = document.getElementById('sleepChart').getContext('2d');
            const sleepChart = new Chart(sleepCtx, {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Hours Slept',
                        data: healthData.sleep.map(item => item.hours),
                        backgroundColor: '#4cc9f0'
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Hours'
                            }
                        }
                    }
                }
            });
            
            // Weight chart for weight page
            const weightCtx = document.getElementById('weightChart').getContext('2d');
            const weightChart = new Chart(weightCtx, {
                type: 'line',
                data: {
                    labels: healthData.weight.map(item => {
                        const date = new Date(item.date);
                        return date.toLocaleDateString('en-US', { weekday: 'short' });
                    }),
                    datasets: [{
                        label: 'Weight (kg)',
                        data: healthData.weight.map(item => item.value),
                        borderColor: '#4361ee',
                        backgroundColor: 'rgba(67, 97, 238, 0.1)',
                        fill: true,
                        tension: 0.1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Weight (kg)'
                            }
                        }
                    }
                }
            });
            
            // Initialize other charts similarly...
        }

        // Set up navigation
        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    navItems.forEach(navItem => {
                        navItem.classList.remove('active');
                    });
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show the corresponding page
                    const pageId = this.getAttribute('data-page') + '-page';
                    const pages = document.querySelectorAll('.page');
                    
                    pages.forEach(page => {
                        page.classList.remove('active');
                    });
                    
                    document.getElementById(pageId).classList.add('active');
                    
                    // Update data history for the page
                    updateDataHistory(this.getAttribute('data-page'));
                });
            });
        }

        // Set up modal functionality
        function setupModal() {
            const modal = document.getElementById('dataModal');
            const addBtn = document.getElementById('addDataBtn');
            const closeBtn = document.querySelector('.close');
            const metricTypeSelect = document.getElementById('metricType');
            const metricFields = document.querySelectorAll('.metric-fields');
            
            // Show modal when add button is clicked
            addBtn.addEventListener('click', () => {
                modal.style.display = 'flex';
                // Set modal title based on current page
                const activePage = document.querySelector('.nav-item.active').getAttribute('data-page');
                const modalTitle = document.getElementById('modal-title');
                
                switch(activePage) {
                    case 'weight':
                        metricTypeSelect.value = 'weight';
                        toggleMetricFields('weight');
                        modalTitle.textContent = 'Add Weight Data';
                        break;
                    case 'heart':
                        metricTypeSelect.value = 'heartRate';
                        toggleMetricFields('heartRate');
                        modalTitle.textContent = 'Add Heart Rate Data';
                        break;
                    case 'sleep':
                        metricTypeSelect.value = 'sleep';
                        toggleMetricFields('sleep');
                        modalTitle.textContent = 'Add Sleep Data';
                        break;
                    case 'activity':
                        metricTypeSelect.value = 'activity';
                        toggleMetricFields('activity');
                        modalTitle.textContent = 'Add Activity Data';
                        break;
                    case 'nutrition':
                        metricTypeSelect.value = 'nutrition';
                        toggleMetricFields('nutrition');
                        modalTitle.textContent = 'Add Nutrition Data';
                        break;
                    default:
                        modalTitle.textContent = 'Add Health Data';
                }
            });
            
            // Close modal when X is clicked
            closeBtn.addEventListener('click', () => {
                modal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
            
            // Show/hide fields based on metric type selection
            metricTypeSelect.addEventListener('change', function() {
                toggleMetricFields(this.value);
            });
        }

        // Toggle metric fields based on selection
        function toggleMetricFields(type) {
            const allFields = document.querySelectorAll('.metric-fields');
            allFields.forEach(field => {
                field.style.display = 'none';
            });
            
            document.getElementById(`${type}-fields`).style.display = 'block';
        }

        // Set up form submission
        function setupForm() {
            const form = document.getElementById('healthDataForm');
            
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const type = document.getElementById('metricType').value;
                const date = document.getElementById('metricDate').value;
                const notes = document.getElementById('metricNotes').value;
                
                let newData;
                
                switch(type) {
                    case 'weight':
                        const weightValue = parseFloat(document.getElementById('weightValue').value);
                        newData = { date, value: weightValue, notes };
                        healthData.weight.push(newData);
                        // Update current weight display
                        document.getElementById('current-weight').textContent = `${weightValue} kg`;
                        break;
                    
                    case 'heartRate':
                        const heartRateValue = parseInt(document.getElementById('heartRateValue').value);
                        newData = { date, value: heartRateValue, notes };
                        healthData.heartRate.push(newData);
                        // Update current heart rate display
                        document.getElementById('current-heartrate').textContent = `${heartRateValue} bpm`;
                        break;
                    
                    case 'water':
                        const waterValue = parseFloat(document.getElementById('waterValue').value);
                        newData = { date, value: waterValue, notes };
                        healthData.water.push(newData);
                        // Update current water intake display
                        document.getElementById('current-water').textContent = `${waterValue}L`;
                        break;
                    
                    case 'sleep':
                        const sleepHours = parseFloat(document.getElementById('sleepHours').value);
                        const sleepQuality = parseInt(document.getElementById('sleepQuality').value);
                        newData = { date, hours: sleepHours, quality: sleepQuality, notes };
                        healthData.sleep.push(newData);
                        break;
                    
                    case 'activity':
                        const activityType = document.getElementById('activityType').value;
                        const activityDuration = parseInt(document.getElementById('activityDuration').value);
                        const activityCalories = parseInt(document.getElementById('activityCalories').value);
                        newData = { 
                            date, 
                            type: activityType, 
                            duration: activityDuration, 
                            calories: activityCalories, 
                            notes 
                        };
                        healthData.activity.push(newData);
                        // Update current calories burned display
                        const currentCalories = document.getElementById('current-calories').textContent;
                        const newCalories = parseInt(currentCalories.replace(',', '')) + activityCalories;
                        document.getElementById('current-calories').textContent = newCalories.toLocaleString();
                        break;
                    
                    case 'nutrition':
                        const caloriesConsumed = parseInt(document.getElementById('caloriesConsumed').value);
                        const protein = parseInt(document.getElementById('protein').value);
                        const carbs = parseInt(document.getElementById('carbs').value);
                        const fat = parseInt(document.getElementById('fat').value);
                        newData = { 
                            date, 
                            calories: caloriesConsumed, 
                            protein, 
                            carbs, 
                            fat, 
                            notes 
                        };
                        healthData.nutrition.push(newData);
                        break;
                }
                
                // Update UI with new data
                updateUI();
                
                // Close modal and reset form
                document.getElementById('dataModal').style.display = 'none';
                form.reset();
                
                // Set today's date as default again
                const today = new Date().toISOString().substr(0, 10);
                document.getElementById('metricDate').value = today;
                
                alert('Data saved successfully!');
            });
        }

        // Update UI with current data
        function updateUI() {
            // Update stats cards with latest data
            if (healthData.weight.length > 0) {
                const latestWeight = healthData.weight[healthData.weight.length - 1];
                document.getElementById('current-weight').textContent = `${latestWeight.value} kg`;
            }
            
            if (healthData.heartRate.length > 0) {
                const latestHeartRate = healthData.heartRate[healthData.heartRate.length - 1];
                document.getElementById('current-heartrate').textContent = `${latestHeartRate.value} bpm`;
            }
            
            if (healthData.water.length > 0) {
                const latestWater = healthData.water[healthData.water.length - 1];
                document.getElementById('current-water').textContent = `${latestWater.value}L`;
            }
            
            // Update data history for the active page
            const activePage = document.querySelector('.nav-item.active').getAttribute('data-page');
            updateDataHistory(activePage);
        }

        // Update data history table for a specific metric
        function updateDataHistory(metric) {
            const historyBody = document.getElementById(`${metric}-history-body`);
            
            if (!historyBody) return;
            
            // Clear existing rows
            historyBody.innerHTML = '';
            
            // Add new rows based on data
            let dataToShow;
            
            switch(metric) {
                case 'weight':
                    dataToShow = healthData.weight;
                    break;
                case 'heart':
                    dataToShow = healthData.heartRate;
                    break;
                case 'sleep':
                    dataToShow = healthData.sleep;
                    break;
                case 'activity':
                    dataToShow = healthData.activity;
                    break;
                case 'nutrition':
                    dataToShow = healthData.nutrition;
                    break;
                default:
                    return;
            }
            
            // Reverse to show latest first
            const reversedData = [...dataToShow].reverse();
            
            reversedData.forEach(item => {
                const row = document.createElement('tr');
                
                switch(metric) {
                    case 'weight':
                        row.innerHTML = `
                            <td>${formatDate(item.date)}</td>
                            <td>${item.value} kg</td>
                            <td><span class="delete-btn" data-type="weight" data-date="${item.date}"><i class="fas fa-trash"></i></span></td>
                        `;
                        break;
                    
                    case 'heart':
                        row.innerHTML = `
                            <td>${formatDate(item.date)}</td>
                            <td>${item.value} bpm</td>
                            <td><span class="delete-btn" data-type="heartRate" data-date="${item.date}"><i class="fas fa-trash"></i></span></td>
                        `;
                        break;
                    
                    case 'sleep':
                        row.innerHTML = `
                            <td>${formatDate(item.date)}</td>
                            <td>${item.hours} hours</td>
                            <td>${item.quality}/10</td>
                            <td><span class="delete-btn" data-type="sleep" data-date="${item.date}"><i class="fas fa-trash"></i></span></td>
                        `;
                        break;
                    
                    case 'activity':
                        row.innerHTML = `
                            <td>${formatDate(item.date)}</td>
                            <td>${item.type}</td>
                            <td>${item.duration} minutes</td>
                            <td>${item.calories}</td>
                            <td><span class="delete-btn" data-type="activity" data-date="${item.date}"><i class="fas fa-trash"></i></span></td>
                        `;
                        break;
                    
                    case 'nutrition':
                        row.innerHTML = `
                            <td>${formatDate(item.date)}</td>
                            <td>${item.calories}</td>
                            <td>${item.protein}</td>
                            <td>${item.carbs}</td>
                            <td>${item.fat}</td>
                            <td><span class="delete-btn" data-type="nutrition" data-date="${item.date}"><i class="fas fa-trash"></i></span></td>
                        `;
                        break;
                }
                
                historyBody.appendChild(row);
            });
            
            // Add event listeners to delete buttons
            const deleteButtons = document.querySelectorAll('.delete-btn');
            deleteButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    const date = this.getAttribute('data-date');
                    
                    if (confirm('Are you sure you want to delete this entry?')) {
                        // Remove the item from data
                        healthData[type] = healthData[type].filter(item => item.date !== date);
                        
                        // Update UI
                        updateUI();
                    }
                });
            });
        }

        // Format date for display
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric' 
            });
        }
    </script>
</body>
</html>